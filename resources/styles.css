*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{overflow:hidden}
:root{
  --bg0:#0d1117;--bg1:#161b22;--bg2:#21262d;--bg3:#30363d;
  --border:#30363d;--text:#e6edf3;--text2:#8b949e;--text3:#484f58;
  --accent:#58a6ff;--accent2:#388bfd;--ok:#3fb950;--warn:#d29922;--err:#f85149;--dir:#79c0ff;
  --hover:rgba(139,148,158,.12);--text-disp:#c9d1d9;
}
[data-theme="light"]{
  --bg0:#f6f8fa;--bg1:#ffffff;--bg2:#f1f3f5;--bg3:#d0d7de;
  --border:#d0d7de;--text:#1f2328;--text2:#57606a;--text3:#8c959f;
  --accent:#0969da;--accent2:#0550ae;--ok:#1a7f37;--warn:#9a6700;--err:#cf222e;--dir:#0969da;
  --hover:rgba(208,215,222,.5);--text-disp:#424a53;
}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;background:var(--bg0);color:var(--text);height:100vh;display:flex;flex-direction:column;overflow:hidden;font-size:13px;user-select:none}
#header{display:flex;flex-direction:column;background:var(--bg1);border-bottom:1px solid var(--border);flex-shrink:0}
.header-top{display:flex;align-items:center;padding:5px 12px;gap:8px;border-bottom:1px solid var(--border)}
.logo{font-weight:700;font-size:14px;color:var(--accent);white-space:nowrap;letter-spacing:.5px}
.lang-select{background:var(--bg2);color:var(--text2);border:1px solid var(--border);border-radius:4px;padding:2px 6px;font-size:11px;cursor:pointer;outline:none;font-family:inherit}
.lang-select:focus{border-color:var(--accent)}
.header-bottom{display:flex;align-items:center;padding:5px 12px;gap:6px}
.server-bar{display:flex;align-items:center;gap:5px;flex:1;min-width:0}
.server-select{flex:1;min-width:0;background:var(--bg2);color:var(--text);border:1px solid var(--border);border-radius:6px;padding:4px 8px;font-size:12px;cursor:pointer;outline:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath fill='%238b949e' d='M0 0l5 6 5-6z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 8px center;padding-right:24px}
.server-select:focus{border-color:var(--accent)}
.conn-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;background:var(--text3);transition:background .3s}
.conn-dot.ok{background:var(--ok)}.conn-dot.err{background:var(--err)}.conn-dot.loading{background:var(--warn);animation:pulse 1s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
.transfer-center{display:flex;flex-direction:row;gap:4px;align-items:center;flex-shrink:0}
.btn-transfer{background:var(--bg2);color:var(--text2);border:1px solid var(--border);font-size:14px;width:30px;height:26px;display:flex;align-items:center;justify-content:center;border-radius:6px;cursor:pointer;transition:all .15s;flex-shrink:0}
.btn-transfer:hover:not(:disabled){background:var(--accent);color:#000;border-color:var(--accent)}
.btn-transfer:disabled{opacity:.3;cursor:not-allowed}
.server-bar-right-pad{width:28px;flex-shrink:0}
.btn{cursor:pointer;border:1px solid var(--border);border-radius:6px;padding:5px 12px;font-size:12px;outline:none;transition:all .15s;white-space:nowrap;background:var(--bg2);color:var(--text);font-family:inherit}
.btn:hover:not(:disabled){background:var(--bg3)}
.btn:disabled{opacity:.35;cursor:not-allowed}
.btn-icon{background:var(--bg2);color:var(--text2);width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:6px;cursor:pointer;font-size:14px;border:1px solid var(--border);flex-shrink:0;transition:all .15s}
.btn-icon:hover:not(:disabled){background:var(--bg3);color:var(--text)}
.btn-icon:disabled{opacity:.35;cursor:not-allowed}
.btn-icon.docker-active{background:rgba(88,166,255,.15);color:var(--accent);border-color:rgba(88,166,255,.5)}
.btn-icon-danger:not(:disabled){color:var(--err)}
.btn-icon-danger:hover:not(:disabled){background:rgba(248,81,73,.15);border-color:rgba(248,81,73,.4);color:var(--err)}
.disk-info-bar{padding:2px 8px;font-size:10px;color:var(--text-disp);background:var(--bg1);border-bottom:1px solid var(--border);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-shrink:0;line-height:16px}
.disk-info-bar:empty{padding:0;border-bottom:none;line-height:0}
.disk-info-inline{font-size:11px;color:var(--text-disp);margin-left:4px;flex-shrink:0}
.btn-primary{background:var(--accent);color:#000;border-color:var(--accent);font-weight:600}
.btn-primary:hover:not(:disabled){background:var(--accent2);border-color:var(--accent2)}
.btn-danger{background:rgba(248,81,73,.15);color:var(--err);border-color:rgba(248,81,73,.4)}
.btn-danger:hover:not(:disabled){background:rgba(248,81,73,.25)}
#main{display:flex;flex:1;overflow:hidden}
.file-panel{flex:1;display:flex;flex-direction:column;border-right:1px solid var(--border);overflow:hidden;min-width:0}
.file-panel:last-child{border-right:none}
.panel-toolbar{display:flex;align-items:center;padding:5px 8px;gap:5px;background:var(--bg1);border-bottom:1px solid var(--border);flex-shrink:0}
.path-input{flex:1;min-width:0;background:var(--bg0);color:var(--text);border:1px solid var(--border);border-radius:4px;padding:4px 8px;font-family:'Cascadia Code','Consolas',monospace;font-size:11px;outline:none}
.path-input:focus{border-color:var(--accent)}
.list-header{display:grid;grid-template-columns:20px var(--col-w-name,1fr) var(--col-w-size,72px) var(--col-w-mtime,140px);padding:4px 8px;background:var(--bg2);border-bottom:1px solid var(--border);font-size:11px;color:var(--text2);font-weight:600;flex-shrink:0;gap:4px;overflow-x:hidden;min-width:0}
.col-wrap{position:relative;display:flex;align-items:center;min-width:0;overflow:visible;cursor:pointer;user-select:none}
.col-wrap:hover .col-sort{color:var(--text)}
.col-sort{flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.col-sort[data-sort="asc"]::after{content:' ▲';color:var(--accent);font-size:9px}
.col-sort[data-sort="desc"]::after{content:' ▼';color:var(--accent);font-size:9px}
.col-resize-handle{position:absolute;right:-3px;top:0;height:100%;width:6px;cursor:col-resize;z-index:5;border-radius:2px}
.col-resize-handle:hover,.col-resize-handle.dragging{background:var(--accent);opacity:.5}
.list-body{flex:1;overflow-y:auto;overflow-x:auto}
.list-body::-webkit-scrollbar{width:5px;height:5px}
.list-body::-webkit-scrollbar-thumb{background:var(--bg3);border-radius:3px}
.file-row{display:grid;grid-template-columns:20px var(--col-w-name,1fr) var(--col-w-size,72px) var(--col-w-mtime,140px);padding:2px 8px;cursor:pointer;align-items:center;gap:4px;min-height:24px}
.file-row:hover{background:var(--bg2)}
.file-row.selected{background:rgba(88,166,255,.1)}
.file-row.selected:hover{background:rgba(88,166,255,.16)}
.file-row input[type="checkbox"]{cursor:pointer;accent-color:var(--accent);width:13px;height:13px}
.file-name-cell{display:flex;align-items:center;gap:5px;overflow:hidden}
.file-icon{flex-shrink:0;font-size:12px}
.file-name-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.is-dir .file-name-text{color:var(--dir);font-weight:500}
.is-link .file-name-text{color:var(--warn)}
.file-size-cell,.file-mtime-cell{color:var(--text2);font-family:'Cascadia Code','Consolas',monospace;font-size:11px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.panel-state{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;color:var(--text3);gap:8px;padding:32px;text-align:center;height:100%}
.panel-state .state-icon{font-size:36px}
.panel-state.err{color:var(--err)}
#progressSection{padding:8px 14px 10px;background:var(--bg1);border-top:1px solid var(--border);flex-shrink:0;display:none}
#progressSection.visible{display:block}
.progress-meta{display:flex;justify-content:space-between;align-items:center;margin-bottom:7px}
.progress-title{font-size:12px;color:var(--text2);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:50%}
.progress-stats{display:flex;align-items:center;gap:14px;font-size:12px;font-family:'Cascadia Code','Consolas',monospace}
#progressPct{color:var(--text);font-weight:600;min-width:38px;text-align:right}
#progressSpeed{color:var(--accent);min-width:80px;text-align:right}
#progressEta{color:var(--text2);min-width:60px}
.progress-track{height:5px;background:var(--bg3);border-radius:3px;overflow:hidden}
.progress-fill{height:100%;background:var(--accent);border-radius:3px;width:0%;transition:width .6s linear}
.progress-fill.done{background:var(--ok);transition:none}
.progress-fill.error{background:var(--err);transition:none}
.progress-fill.indeterminate{background:var(--warn);transition:width .8s ease-in-out}
#statusBar{display:flex;align-items:center;padding:0 14px;height:26px;background:var(--bg1);border-top:1px solid var(--border);flex-shrink:0;gap:10px;font-size:11px}
.status-text{color:var(--text2);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.selection-info{color:var(--text-disp);white-space:nowrap}
.zoom-controls{display:flex;align-items:center;gap:1px;margin-left:6px}
.zoom-btn{background:none;border:none;color:var(--text3);cursor:pointer;font-size:14px;padding:0 4px;line-height:1;border-radius:3px;height:20px}
.zoom-btn:hover{background:var(--hover);color:var(--text)}
.zoom-label{font-size:11px;color:var(--text-disp);min-width:34px;text-align:center;user-select:none}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;align-items:center;justify-content:center;z-index:100}
.modal-overlay.open{display:flex}
.modal-box{background:var(--bg1);border:1px solid var(--border);border-radius:12px;width:520px;max-height:92vh;overflow-y:auto;padding:24px;display:flex;flex-direction:column;gap:14px}
.modal-box::-webkit-scrollbar{width:5px}
.modal-box::-webkit-scrollbar-thumb{background:var(--bg3);border-radius:3px}
.modal-title{font-size:15px;font-weight:600}
.form-group{display:flex;flex-direction:column;gap:5px}
.form-label{font-size:11px;color:var(--text2);font-weight:600;letter-spacing:.3px;text-transform:uppercase}
.form-note{font-size:10px;color:var(--text3);margin-top:2px;line-height:1.5}
.form-input{background:var(--bg0);color:var(--text);border:1px solid var(--border);border-radius:6px;padding:7px 10px;font-size:13px;outline:none;width:100%;font-family:inherit}
.form-input:focus{border-color:var(--accent)}
.form-input[type="password"]{font-family:monospace;letter-spacing:1px}
.form-row{display:grid;grid-template-columns:1fr 90px;gap:8px}
.radio-group{display:flex;gap:16px;flex-wrap:wrap}
.radio-label{display:flex;align-items:center;gap:6px;cursor:pointer;font-size:13px;color:var(--text)}
.radio-label input{accent-color:var(--accent);cursor:pointer}
.divider{border:none;border-top:1px solid var(--border)}
.modal-footer{display:flex;align-items:center;gap:8px;padding-top:4px;flex-wrap:wrap}
.flex-spacer{flex:1}
#testResult{background:var(--bg0);border:1px solid var(--border);border-radius:6px;padding:10px 12px;font-size:11px;font-family:'Cascadia Code','Consolas',monospace;display:none;line-height:1.8;max-height:160px;overflow-y:auto}
#testResult.visible{display:block}
#testResult::-webkit-scrollbar{width:4px}
#testResult::-webkit-scrollbar-thumb{background:var(--bg3);border-radius:2px}
.tr-row{display:flex;align-items:center;gap:8px}
.tr-icon{width:16px;text-align:center;flex-shrink:0}
.tr-label{color:var(--text2);flex:1}
.tr-val{color:var(--text3);font-size:10px;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.tr-ok .tr-icon::after{content:"✓";color:var(--ok)}
.tr-err .tr-icon::after{content:"✗";color:var(--err)}
.tr-pending .tr-icon::after{content:"…";color:var(--warn)}
#toast{position:fixed;bottom:44px;left:50%;transform:translateX(-50%) translateY(12px);background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:7px 16px;border-radius:8px;font-size:12px;opacity:0;transition:opacity .25s,transform .25s;z-index:200;pointer-events:none;white-space:nowrap;max-width:400px;overflow:hidden;text-overflow:ellipsis}
#toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
#toast.t-ok{border-color:var(--ok);color:var(--ok)}
/* ── Tabs ────────────────────────────────────────────────── */
.tab-bar{display:flex;background:var(--bg1);border-bottom:1px solid var(--border);padding:0 12px;flex-shrink:0}
.tab-btn{background:none;border:none;border-bottom:2px solid transparent;color:var(--text2);padding:6px 14px;font-size:12px;font-weight:600;cursor:pointer;outline:none;transition:color .15s,border-color .15s;font-family:inherit}
.tab-btn:hover{color:var(--text)}
.tab-btn.active{color:var(--accent);border-bottom-color:var(--accent)}
/* ── Backup header bar ───────────────────────────────────── */
.bk-mount-bar{display:flex;align-items:center;gap:6px}
.bk-mount-label{font-size:11px;color:var(--text2);white-space:nowrap}
.btn-sm{padding:3px 10px;font-size:11px;height:22px}
/* ── Backup panel ────────────────────────────────────────── */
.backup-panel{flex:1;display:flex;flex-direction:column;overflow:hidden;min-height:0}
.bk-content{flex:1;display:flex;flex-direction:column;overflow:hidden}
.bk-subtab-bar{display:flex;background:var(--bg2);border-bottom:1px solid var(--border);padding:0 12px;flex-shrink:0}
.bk-subtab{background:none;border:none;border-bottom:2px solid transparent;color:var(--text2);padding:5px 12px;font-size:12px;font-weight:600;cursor:pointer;outline:none;transition:color .15s,border-color .15s;font-family:inherit}
.bk-subtab:hover{color:var(--text)}
.bk-subtab.active{color:var(--accent);border-bottom-color:var(--accent)}
.bk-body{flex:1;display:flex;overflow:hidden;min-height:0}
.bk-list-pane{flex:1;display:flex;flex-direction:column;border-right:1px solid var(--border);overflow:hidden;min-width:0}
.bk-list-pane:last-child{border-right:none}
.bk-resize-handle{height:4px;flex-shrink:0;background:var(--bg3);cursor:row-resize;transition:background .15s}
.bk-resize-handle:hover,.bk-resize-handle.dragging{background:var(--accent)}
.bk-bottom-log{height:150px;flex-shrink:0;display:flex;flex-direction:column;overflow:hidden}
.bk-bottom-log.log-collapsed{height:auto}
.bk-bottom-log.log-collapsed .bk-log{display:none}
.bk-list-toolbar,.bk-log-toolbar{display:flex;align-items:center;padding:5px 8px;gap:5px;background:var(--bg2);border-bottom:1px solid var(--border);flex-shrink:0}
.bk-pane-label{font-size:11px;color:var(--text);font-weight:600;flex-shrink:0;white-space:nowrap}
.bk-list{flex:1;overflow-y:auto;overflow-x:hidden}
.bk-list::-webkit-scrollbar{width:5px}
.bk-list::-webkit-scrollbar-thumb{background:var(--bg3);border-radius:3px}
.bk-row{display:flex;align-items:center;gap:8px;padding:4px 10px;cursor:pointer;min-height:26px}
.bk-row:hover{background:var(--bg2)}
.bk-row.selected{background:rgba(88,166,255,.1)}
.bk-row.selected:hover{background:rgba(88,166,255,.16)}
.bk-row input[type="checkbox"]{cursor:pointer;accent-color:var(--accent);width:13px;height:13px;flex-shrink:0}
.bk-row-name{flex:1;font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.bk-row-meta{font-size:11px;color:var(--text-disp);white-space:nowrap;font-family:'Cascadia Code','Consolas',monospace}
.bk-log{flex:1;overflow-y:auto;padding:8px 10px;font-size:11px;font-family:'Cascadia Code','Consolas',monospace;line-height:1.7;background:var(--bg0)}
.bk-log::-webkit-scrollbar{width:5px}
.bk-log::-webkit-scrollbar-thumb{background:var(--bg3);border-radius:3px}
.bk-log-line{color:var(--text2);white-space:pre-wrap;word-break:break-all}
.bk-log-line.ok{color:var(--ok)}
.bk-log-line.err{color:var(--err)}
.bk-log-line.warn{color:var(--warn)}
/* ── Scan result inside modal ────────────────────────────── */
.scan-result{background:var(--bg0);border:1px solid var(--border);border-radius:6px;padding:10px 12px;font-size:12px;display:flex;flex-direction:column;gap:8px}
.scan-result select{background:var(--bg2);color:var(--text);border:1px solid var(--border);border-radius:4px;padding:4px 8px;font-size:12px;width:100%;outline:none}
.scan-result select:focus{border-color:var(--accent)}
.scan-no-ssd{color:var(--warn);font-size:12px}
#toast.t-warn{border-color:var(--warn);color:var(--warn)}
#toast.t-err{border-color:var(--err);color:var(--err)}
/* ── Light mode overrides ─────────────────────────────────── */
[data-theme="light"] .server-select{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath fill='%2357606a' d='M0 0l5 6 5-6z'/%3E%3C/svg%3E")}
[data-theme="light"] .modal-overlay{background:rgba(0,0,0,.45)}
/* ── Backup header layout fix ─────────────────────────────── */
#headerBackup .server-bar{flex:0 0 auto}
#headerBackup .server-select{flex:none;width:200px}
#bkMountBar{flex-shrink:0}